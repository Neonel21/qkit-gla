

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>qkit.drivers.Tabor_WX1284C &mdash; Qkit 0.1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=a58bc63e"></script>
      <script src="../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Qkit
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Package Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../qkit.html">qkit package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Qkit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">qkit.drivers.Tabor_WX1284C</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for qkit.drivers.Tabor_WX1284C</h1><div class="highlight"><pre>
<span></span><span class="c1"># Tabor_WX1284C.py driver, to perform the communication between the Wrapper and the device</span>
<span class="c1"># Lukas Gruenhaupt &lt;gruenhaupt@gmail.com&gt;, 04/2015</span>
<span class="c1"># Andre Schneider &lt;andre.schneider@kit.edu&gt;, 01/2016</span>
<span class="c1">#</span>
<span class="c1"># based on Tektronix_AWG7062.py class coded by</span>
<span class="c1"># Pieter de Groot &lt;pieterdegroot@gmail.com&gt;, 2008</span>
<span class="c1"># Martijn Schaafsma &lt;qtlab@mcschaafsma.nl&gt;, 2008</span>
<span class="c1"># Guenevere Prawiroatmodjo &lt;guen@vvtp.tudelft.nl&gt;, 2009</span>
<span class="c1"># Markus Jerger &lt;jerger@kit.edu&gt;, 2010</span>
<span class="c1">#</span>
<span class="c1"># This program is free software; you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation; either version 2 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program; if not, write to the Free Software</span>
<span class="c1"># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">qkit.core.instrument_base</span><span class="w"> </span><span class="kn">import</span> <span class="n">Instrument</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qkit</span><span class="w"> </span><span class="kn">import</span> <span class="n">visa</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">types</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pyvisa.constants</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">vc</span>


<div class="viewcode-block" id="Tabor_WX1284C">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Tabor_WX1284C</span><span class="p">(</span><span class="n">Instrument</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This is the python driver for the Tabor Electronics Arbitrary Waveform Generator WX1284C/WX2184C</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">chpair</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">numchannels</span> <span class="o">=</span> <span class="mi">4</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initializes the AWG WX1284C</span>
<span class="sd">        Input:</span>
<span class="sd">            name (string)    : name of the instrument</span>
<span class="sd">            address (string) : GPIB address</span>
<span class="sd">            reset (bool)     : resets to default values, default=false</span>
<span class="sd">            chpair (int)     : number of channel pair (1 for channels 1&amp;2, 2 for channels 3&amp;4)</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Initializing instrument at &#39;</span><span class="o">+</span><span class="n">address</span><span class="p">)</span>
        <span class="n">Instrument</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;physical&#39;</span><span class="p">])</span>




        <span class="bp">self</span><span class="o">.</span><span class="n">_address</span> <span class="o">=</span> <span class="n">address</span>
        <span class="k">if</span> <span class="n">visa</span><span class="o">.</span><span class="n">qkit_visa_version</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span> <span class="o">=</span> <span class="n">visa</span><span class="o">.</span><span class="n">instrument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_address</span><span class="p">,</span><span class="n">term_chars</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">timeout</span><span class="o">=</span><span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span> <span class="o">=</span> <span class="n">visa</span><span class="o">.</span><span class="n">instrument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_address</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">timeout</span><span class="o">=</span><span class="mi">2000</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">visalib</span><span class="o">.</span><span class="n">set_buffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">session</span><span class="p">,</span> <span class="n">vc</span><span class="o">.</span><span class="n">VI_READ_BUF</span><span class="p">,</span> <span class="mi">4000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">visalib</span><span class="o">.</span><span class="n">set_buffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">session</span><span class="p">,</span> <span class="n">vc</span><span class="o">.</span><span class="n">VI_WRITE_BUF</span><span class="p">,</span> <span class="mi">32000</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">read_termination</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">write_termination</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

                <span class="c1">#intf_type = self._visainstrument.get_visa_attribute(vc.VI_ATTR_INTF_TYPE)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">get_visa_attribute</span><span class="p">(</span><span class="n">vc</span><span class="o">.</span><span class="n">VI_ATTR_INTF_TYPE</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="n">vc</span><span class="o">.</span><span class="n">VI_INTF_USB</span><span class="p">,</span> <span class="n">vc</span><span class="o">.</span><span class="n">VI_INTF_GPIB</span><span class="p">,</span> <span class="n">vc</span><span class="o">.</span><span class="n">VI_INTF_TCPIP</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">set_visa_attribute</span><span class="p">(</span><span class="n">vc</span><span class="o">.</span><span class="n">VI_ATTR_WR_BUF_OPER_MODE</span><span class="p">,</span> <span class="n">vc</span><span class="o">.</span><span class="n">VI_FLUSH_ON_ACCESS</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">set_visa_attribute</span><span class="p">(</span><span class="n">vc</span><span class="o">.</span><span class="n">VI_ATTR_RD_BUF_OPER_MODE</span><span class="p">,</span> <span class="n">vc</span><span class="o">.</span><span class="n">VI_FLUSH_ON_ACCESS</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">get_visa_attribute</span><span class="p">(</span><span class="n">vc</span><span class="o">.</span><span class="n">VI_ATTR_INTF_TYPE</span><span class="p">)</span> <span class="o">==</span> <span class="n">vc</span><span class="o">.</span><span class="n">VI_INTF_TCPIP</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">set_visa_attribute</span><span class="p">(</span><span class="n">vc</span><span class="o">.</span><span class="n">VI_ATTR_TERMCHAR_EN</span><span class="p">,</span> <span class="n">vc</span><span class="o">.</span><span class="n">VI_TRUE</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>


        
        
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_ins_VISA_INSTR</span> <span class="o">=</span> <span class="kc">False</span><span class="c1">#(self._visainstrument.resource_class == &quot;INSTR&quot;) #check whether we have INSTR or SOCKET type</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_awg_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:SYST:INF:MOD?&quot;</span><span class="p">)</span> <span class="c1">#gives model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_values</span><span class="p">[</span><span class="s1">&#39;files&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clock</span> <span class="o">=</span> <span class="mf">1.25e9</span> <span class="c1"># max value for WX1284</span>

        <span class="k">if</span> <span class="n">chpair</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;chpair should be 1, 2 or None.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">chpair</span> <span class="ow">and</span> <span class="n">numchannels</span><span class="o">!=</span><span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;numchannels should be 2.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">chpair</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">numchannels</span> <span class="o">!=</span><span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;numchannels should be 4.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">=</span> <span class="n">numchannels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_choff</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="n">chpair</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_choff</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="n">numchannels</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;runmode&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;runmode&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;marker_output&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_awg_version</span> <span class="o">==</span> <span class="s2">&quot;WX2184C&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_impedance&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>       <span class="c1">#changed, checked in manual</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">minval</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">maxval</span><span class="o">=</span><span class="mf">10e3</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Ohm&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_level&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">minval</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">maxval</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Volts&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;clock&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">minval</span><span class="o">=</span><span class="mf">1e6</span><span class="p">,</span> <span class="n">maxval</span><span class="o">=</span><span class="mf">2.3e9</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;reference_source&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;reference_source_freq&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">minval</span><span class="o">=</span><span class="mf">10e6</span><span class="p">,</span> <span class="n">maxval</span><span class="o">=</span><span class="mf">100e6</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;common_clock&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;amplitude&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span><span class="p">),</span> <span class="n">minval</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">maxval</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Volts&#39;</span><span class="p">,</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span><span class="p">),</span> <span class="n">minval</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">maxval</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Volts&#39;</span><span class="p">,</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;marker_high&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span><span class="p">),</span> <span class="n">minval</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">maxval</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Volts&#39;</span><span class="p">,</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>
            <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
            <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span><span class="p">),</span><span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sync_position&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">numchannels</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_mode&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_delay&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sequence_mode&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_source&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_time&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sync_output&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_slope&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">channel_prefix</span><span class="o">=</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_&#39;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_mode&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_delay&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sequence_mode&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_source&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_time&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sync_output&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_slope&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                <span class="n">flags</span><span class="o">=</span><span class="n">Instrument</span><span class="o">.</span><span class="n">FLAG_GETSET</span><span class="p">)</span>

        <span class="c1"># Add functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;fix&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;wait&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;get_all&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;set_seq_length&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;clear_waveforms&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;ask&#39;</span><span class="p">)</span> <span class="c1">#for debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;write&#39;</span><span class="p">)</span> <span class="c1">#for debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;define_sequence&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">)</span>


        <span class="k">if</span> <span class="n">numchannels</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;preset_readout&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;preset_manipulation&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;wfm_send&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;wfm_send2&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">reset</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:INST1;:MARK:SOUR USER;:INST3;:MARK:SOUR USER&quot;</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The device is set up with </span><span class="si">%i</span><span class="s2"> channels. You use the channels </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">numchannels</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">numchannels</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choff</span><span class="o">+</span><span class="mi">1</span><span class="p">))))</span>

    <span class="c1"># Functions</span>
<div class="viewcode-block" id="Tabor_WX1284C.fix">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.fix">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Communication with the device is sometimes problematic. This functions helps by clearing the queue and reading/resetting the error memory.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ins_VISA_INSTR</span><span class="p">:</span>
            <span class="n">tmo</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">timeout</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="mf">.1</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Emptying Queue&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">):</span>
                    <span class="n">rl</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;In Buffer </span><span class="si">%i</span><span class="s2">: &quot;</span><span class="o">%</span><span class="n">i</span><span class="o">+</span><span class="n">rl</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">visa</span><span class="o">.</span><span class="n">VisaIOError</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Timeout after </span><span class="si">%i</span><span class="s2"> iterations&quot;</span><span class="o">%</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">tmo</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Clearing Error Memory:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">():</span>
                    <span class="k">return</span> <span class="n">i</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">continue</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.check">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.check">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#this function is used to check whether the command was successfull</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:SYST:ERR?&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;) : Device responded with error -&gt;</span><span class="si">%s</span><span class="s2">&lt;-&quot;</span><span class="o">%</span><span class="n">rv</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">visa</span><span class="o">.</span><span class="n">VisaIOError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.reset">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.reset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Resets the instrument to default values</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Resetting instrument&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;*RST&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:INST1;:MARK:SOUR USER;:INST3;:MARK:SOUR USER&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.preset">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.preset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">preset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        resets the instrument and then sets all parameters to the values necessary for the time domain setup</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_impedance</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_level</span><span class="p">(</span><span class="mf">.2</span><span class="p">)</span>
        <span class="c1">#self.set_p1_trigger_mode(&#39;TRIG&#39;)</span>
        <span class="c1">#self.set_p2_trigger_mode(&#39;TRIG&#39;)</span>
        <span class="c1">#self.set_p1_runmode(&#39;SEQ&#39;)</span>
        <span class="c1">#self.set_p2_runmode(&#39;USER&#39;)</span>
        <span class="c1">#self.set_p1_sequence_mode(&#39;STEP&#39;)</span>
        <span class="c1">#self.set_p2_sequence_mode(&#39;STEP&#39;)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_amplitude&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_marker_output&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_marker_high&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.get_all">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.get_all">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Reads all implemented parameters from the instrument,</span>
<span class="sd">        and updates the wrapper.</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Reading all data from instrument&#39;</span><span class="p">)</span>
        <span class="c1">#self.check()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">pass</span>
            <span class="c1">#self.get_trigger_impedance()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;command trigger impedance not supported&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_trigger_level</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_runmode&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_trigger_mode&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_sequence_mode&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_sync_output&#39;</span> <span class="o">%</span><span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_trigger_time&#39;</span> <span class="o">%</span><span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_trigger_delay&#39;</span> <span class="o">%</span><span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_trigger_source&#39;</span> <span class="o">%</span><span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;p</span><span class="si">%d</span><span class="s1">_trigger_slope&#39;</span> <span class="o">%</span><span class="n">i</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_amplitude&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_offset&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_marker_high&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_marker_output&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_status&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_output&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;runmode&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;trigger_mode&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sequence_mode&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sync_output&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;trigger_time&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;trigger_delay&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;trigger_source&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;trigger_slope&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.preset_readout">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.preset_readout">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">preset_readout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tr_slope</span> <span class="o">=</span> <span class="s1">&#39;NEG&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        prepare the specified AWG for readout mode</span>

<span class="sd">        inputs:</span>
<span class="sd">            trigger edge</span>
<span class="sd">        output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_runmode</span><span class="p">(</span><span class="s1">&#39;USER&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ch1_output</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ch2_output</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_mode</span><span class="p">(</span><span class="s1">&#39;TRIG&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_source</span><span class="p">(</span><span class="s1">&#39;EXT&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_amplitude&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_marker_output&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_marker_high&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_slope</span><span class="p">(</span><span class="n">tr_slope</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Trigger slope has to be POS or NEG. Setting to NEG.&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_slope</span><span class="p">(</span><span class="s1">&#39;NEG&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.preset_manipulation">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.preset_manipulation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">preset_manipulation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        prepare the specified AWG for manipulation</span>
<span class="sd">        default repitition time is 2e-4</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_runmode</span><span class="p">(</span><span class="s1">&#39;SEQ&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ch1_output</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ch2_output</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_mode</span><span class="p">(</span><span class="s1">&#39;TRIG&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_source</span><span class="p">(</span><span class="s1">&#39;TIM&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sync_output</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_time</span><span class="p">(</span><span class="mf">2e-4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sequence_mode</span><span class="p">(</span><span class="s2">&quot;STEP&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_amplitude&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_marker_output&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%i</span><span class="s1">_marker_high&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span></div>



<div class="viewcode-block" id="Tabor_WX1284C.ask">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.ask">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">ask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cmd</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot; ask command:&quot;</span><span class="o">+</span><span class="n">cmd</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">visa</span><span class="o">.</span><span class="n">VisaIOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;): VisaIOError, retry -&gt;</span><span class="si">%s</span><span class="s2">&lt;-&quot;</span><span class="o">%</span><span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;): ask(&#39;</span><span class="si">%s</span><span class="s2">&#39;) not successful after 15 retries&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">cmd</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.write">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.write">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cmd</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot; write command:&quot;</span><span class="o">+</span><span class="n">cmd</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">visa</span><span class="o">.</span><span class="n">VisaIOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;) :VisaIOError, retry -&gt;</span><span class="si">%s</span><span class="s2">&lt;-&quot;</span><span class="o">%</span><span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;) : write(&#39;</span><span class="si">%s</span><span class="s2">&#39;) not successful after 15 retries&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">cmd</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.write_raw">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.write_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">write_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cmd</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">visa</span><span class="o">.</span><span class="n">qkit_visa_version</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">write_raw</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span></div>



<div class="viewcode-block" id="Tabor_WX1284C.clear_waveforms">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.clear_waveforms">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">clear_waveforms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Clears the waveform on all channels.</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Clear waveforms from channels&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%i</span><span class="s1">; :TRAC:DEL:ALL&#39;</span><span class="o">%</span><span class="n">idx</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.run">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.run">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initiates the output of a waveform or a sequence. This is equivalent to pressing</span>
<span class="sd">        Run/Delete/Stop button on the front panel. The instrument can be put in the run</span>
<span class="sd">        state only when output waveforms are assigned to channels.</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Run/Initiate output of a waveform or sequence&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:ENAB&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.stop">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.stop">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Terminates the output of a waveform or a sequence. This is equivalent to pressing</span>
<span class="sd">        Run/Delete/Stop button on the front panel.</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Stop/Terminate output of a waveform or sequence&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;ABOR&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.wait">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.wait">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_timeouts</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">quiet</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Wait until the previous command has completed.</span>

<span class="sd">        Input:</span>
<span class="sd">            timeouts - maximum number of timeouts that may occur. note that the command</span>
<span class="sd">                does not execute at all if zero maximum timeouts are requested.</span>
<span class="sd">            quiet - if True, do not show messages when a timeout occurs</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">max_timeouts</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;*STB?&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_timeouts</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.025</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">if</span><span class="p">(</span><span class="ow">not</span> <span class="n">quiet</span><span class="p">):</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;still waiting for the awg to become ready&#39;</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_output">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_output">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This command sets the output state of the AWG.</span>
<span class="sd">        Input:</span>
<span class="sd">            channel (int) : the source channel</span>
<span class="sd">            state (bool) : True or False</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ch</span><span class="si">%i</span><span class="s2">_status&quot;</span><span class="o">%</span><span class="n">channel</span><span class="p">,</span><span class="n">state</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_output">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_output">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This command gets the output state of the AWG.</span>
<span class="sd">        Input:</span>
<span class="sd">            channel (int) : the source channel</span>
<span class="sd">        Output:</span>
<span class="sd">            state (bool) : True or False</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ch</span><span class="si">%d</span><span class="s1">_status&#39;</span><span class="o">%</span><span class="n">channel</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_marker_output">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_marker_output">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_marker_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set marker </span><span class="si">%i</span><span class="s1"> output state </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span><span class="n">state</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:MARK:SEL</span><span class="si">%i</span><span class="s1">;:MARK:STAT </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,((</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">state</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">()</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_marker_output">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_marker_output">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_marker_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get marker </span><span class="si">%i</span><span class="s1"> output state &#39;</span><span class="o">%</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
        <span class="n">outp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:MARK:SEL</span><span class="si">%i</span><span class="s1">;:MARK:STAT?&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,((</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">outp</span><span class="o">==</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">outp</span> <span class="o">==</span> <span class="s1">&#39;OFF&#39;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">outp</span><span class="o">==</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">outp</span> <span class="o">==</span> <span class="s1">&#39;ON&#39;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Read invalid status from instrument </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">outp</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;an error occurred while reading status from instrument&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_runmode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_runmode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_runmode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Set the output mode of the AWG:</span>
<span class="sd">        FIX - Standard waveform shapes</span>
<span class="sd">        USER - Arbitrary waveforms</span>
<span class="sd">        SEQ - Sequenced mode</span>
<span class="sd">        ASEQ - Advanced seq. mode</span>
<span class="sd">        MOD - Modulated waveforms</span>
<span class="sd">        PULS</span>
<span class="sd">        PATT</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;FIX&quot;</span><span class="p">,</span><span class="s2">&quot;USER&quot;</span><span class="p">,</span><span class="s2">&quot;SEQ&quot;</span><span class="p">,</span><span class="s2">&quot;ASEQ&quot;</span><span class="p">,</span><span class="s2">&quot;MOD&quot;</span><span class="p">,</span><span class="s2">&quot;PULS&quot;</span><span class="p">,</span><span class="s2">&quot;PATT&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The selected mode is not supported, your choice was </span><span class="si">%s</span><span class="s2">, but I have FIX,USER,SEQ,ASEQ,MOD,PULS,PATT&quot;</span><span class="o">%</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:FUNC:MODE </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">),</span><span class="n">mode</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_runmode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_runmode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_runmode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        returns the output mode of the AWG.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:FUNC:MODE?&quot;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span></div>



<div class="viewcode-block" id="Tabor_WX1284C.do_set_sequence_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_sequence_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_sequence_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sequence Mode:</span>
<span class="sd">        AUTO - repeatedly run through the whole sequence (ignoring trigger)</span>
<span class="sd">        ONCE - play whole sequence once at trigger</span>
<span class="sd">        STEP - play one step per trigger event</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;AUTO&quot;</span><span class="p">,</span><span class="s2">&quot;ONCE&quot;</span><span class="p">,</span><span class="s2">&quot;STEP&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The selected sequence mode is not supported, your choice was </span><span class="si">%s</span><span class="s2">, but I have AUTO,ONCE,STEP&quot;</span><span class="o">%</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:SEQ:ADV </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">),</span><span class="n">mode</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_sequence_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_sequence_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_sequence_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:SEQ:ADV?&quot;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span></div>




<div class="viewcode-block" id="Tabor_WX1284C.do_set_trigger_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_trigger_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">runmode</span><span class="p">,</span><span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Set the Trigger Mode of the device to Continuous, Triggered or Gated.</span>
<span class="sd">        Input:</span>
<span class="sd">            runmode (str) : The Trigger mode which can be set to &#39;CONT&#39;, &#39;TRIG&#39;, &#39;GAT&#39;.</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set runmode to </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">runmode</span><span class="p">)</span>
        <span class="n">runmode</span> <span class="o">=</span> <span class="n">runmode</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">runmode</span> <span class="o">==</span> <span class="s1">&#39;TRIG&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:INIT:CONT 0;GATE 0&#39;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">runmode</span> <span class="o">==</span> <span class="s1">&#39;CONT&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:INIT:CONT 1&#39;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">runmode</span> <span class="o">==</span> <span class="s1">&#39;GATE&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:INIT:CONT 0; GATE 1&#39;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Unable to set trigger mode to </span><span class="si">%s</span><span class="s1">, expected &quot;CONT&quot;, &quot;TRIG&quot; or &quot;GATE&quot;&#39;</span> <span class="o">%</span> <span class="n">runmode</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_trigger_mode">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_trigger_mode">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get the Trigger Mode of the device</span>
<span class="sd">        Output:</span>
<span class="sd">            runmode (str) : The Trigger mode which can be set to &#39;CONT&#39;, &#39;TRIG&#39; or &#39;GAT&#39;.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">cont</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:INIT:CONT ?&#39;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">cont</span> <span class="o">==</span> <span class="s1">&#39;OFF&#39;</span><span class="p">):</span>
            <span class="n">gate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:INIT:GATE ?&#39;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">gate</span> <span class="o">==</span> <span class="s1">&#39;OFF&#39;</span><span class="p">):</span>
                <span class="k">return</span> <span class="s1">&#39;TRIG&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;GATE&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;CONT&#39;</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_trigger_delay">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_trigger_delay">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_trigger_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        gets the trigger delay for the specified pair of channels. Internally, the delay is counted in samples, but this function returns seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:TRIG:DEL?&quot;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">)))</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_clock</span><span class="p">())</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_trigger_delay">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_trigger_delay">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_trigger_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">delay</span><span class="p">,</span><span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        gets the trigger delay for the specified pair of channels. Internally, the delay is counted in samples, but this function returns seconds.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">clock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:TRIG:DEL</span><span class="si">%i</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">),</span><span class="nb">round</span><span class="p">(</span><span class="n">delay</span><span class="o">*</span><span class="n">clock</span><span class="p">)))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_trigger_source">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_trigger_source">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_trigger_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        sets the source of the trigger signal external or internal (timer)</span>
<span class="sd">        Input:</span>
<span class="sd">            EXT: external trigger input</span>
<span class="sd">            TIM: internal trigger</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">source</span> <span class="o">==</span> <span class="s2">&quot;INT&quot;</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;TIM&quot;</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;I assume you mean TIM. I fixed this for you :)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;EXT&quot;</span><span class="p">,</span><span class="s2">&quot;TIM&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The selected source is not supported, your choice was </span><span class="si">%s</span><span class="s2">, but I have EXT or TIM&quot;</span><span class="o">%</span><span class="n">source</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:TRIG:SOUR:ADV </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">),</span><span class="n">source</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_trigger_source">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_trigger_source">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_trigger_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        returns the source of the trigger signal external or internal (timer)</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            EXT: external trigger input</span>
<span class="sd">            TIM: internal trigger</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get source of channel </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:TRIG:SOUR:ADV?&quot;</span> <span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_trigger_time">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_trigger_time">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_trigger_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        sets the repitition time of the trigger signal</span>
<span class="sd">        Input:</span>
<span class="sd">            time</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:TRIG:TIM:TIME </span><span class="si">%e</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">),</span><span class="n">time</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_trigger_time">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_trigger_time">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_trigger_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        gets the repitition time of the trigger signal</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            time</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get time of channel </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%s</span><span class="s2">;:TRIG:TIM:TIME?&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_sync_output">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_sync_output">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_sync_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">channel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        sends a sync pulse to sync out, can be used for synchronisation with chpair 2</span>
<span class="sd">        Input:</span>
<span class="sd">            True or False</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span><span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:OUTP:SYNC:SOUR</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:OUTP:SYNC</span><span class="si">%i</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">state</span><span class="p">)</span></div>



<div class="viewcode-block" id="Tabor_WX1284C.do_get_sync_output">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_sync_output">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_sync_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        checks if there is a synchronisation pulse</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            On or Off</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">channel</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:OUTP:SYNC:SOUR ?&quot;</span><span class="p">))</span><span class="o">==</span><span class="n">channel</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:OUTP:SYNC ?&quot;</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;ON&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="Tabor_WX1284C.do_set_sync_position">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_sync_position">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_sync_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">position</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Set the position of the SYNC output pulse.</span>
<span class="sd">        Input:</span>
<span class="sd">            position: start of the pulse after the start of the waveform in seconds. This is internally converted into samples and rounded to 32.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">samplepos</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">position</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span> <span class="o">/</span><span class="mi">32</span><span class="p">))</span><span class="o">*</span><span class="mi">32</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:OUTP:SYNC:POS</span><span class="si">%i</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">samplepos</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_sync_position">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_sync_position">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_sync_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:OUTP:SYNC:POS?&quot;</span><span class="p">))</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.set_trig_impedance">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.set_trig_impedance">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_trig_impedance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">impedance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the trigger impedance to 50 Ohm or 10 kOhm</span>
<span class="sd">        Input:</span>
<span class="sd">            &#39;50&#39; or &#39;10k&#39;</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span>  <span class="o">+</span> <span class="s1">&#39; : Set trigger impedance&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">impedance</span> <span class="o">==</span> <span class="s1">&#39;50&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">impedance</span> <span class="o">==</span> <span class="s1">&#39;10k&#39;</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;TRIG:INP:IMP </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">impedance</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Unable to set impedance to </span><span class="si">%s</span><span class="s1"> Ohm, expected &quot;50&quot; or &quot;10k&quot;&#39;</span> <span class="o">%</span> <span class="n">impedance</span><span class="p">)</span></div>



<div class="viewcode-block" id="Tabor_WX1284C.do_get_trigger_impedance">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_trigger_impedance">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_trigger_impedance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Reads the trigger impedance from the instrument</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            impedance: 10K or 50 (Ohm)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1">#logging.error(__name__ + &#39; : getting trigger impedance does currently not work... (AS 01/2016)&#39;)</span>
        <span class="c1">#return 0</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span>  <span class="o">+</span> <span class="s1">&#39; : Get trigger impedance from instrument&#39;</span><span class="p">)</span>
        <span class="n">imp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;TRIG:INP:IMP ?&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">imp</span> <span class="o">==</span> <span class="s2">&quot;10K&quot;</span><span class="p">:</span> <span class="n">imp</span> <span class="o">=</span> <span class="mf">1e4</span>
        <span class="k">return</span>  <span class="n">imp</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_trigger_impedance">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_trigger_impedance">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_trigger_impedance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the trigger impedance of the instrument</span>
<span class="sd">        Input:</span>
<span class="sd">            mod (int) : Either 1e3 or 50 depending on the mode</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">mod</span><span class="o">==</span><span class="mf">10e3</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_trig_impedance</span><span class="p">(</span><span class="s1">&#39;10k&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">mod</span><span class="o">==</span><span class="mi">50</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_trig_impedance</span><span class="p">(</span><span class="s1">&#39;50&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Unable to set trigger impedance to </span><span class="si">%s</span><span class="s1">, expected &quot;10e3&quot; or &quot;50&quot;&#39;</span> <span class="o">%</span> <span class="n">mod</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_trigger_level">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_trigger_level">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_trigger_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Reads the trigger level from the instrument</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span>  <span class="o">+</span> <span class="s1">&#39; : Get trigger level from instrument&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;TRIG:LEV ?&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_trigger_level">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_trigger_level">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_trigger_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the trigger level of the instrument</span>
<span class="sd">        Input:</span>
<span class="sd">            level (float) : trigger level in volts</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span>  <span class="o">+</span> <span class="s1">&#39; : Trigger level set to </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">level</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;TRIG:LEV </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">level</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_trigger_slope">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_trigger_slope">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_trigger_slope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slope</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Trigger starts with positive or negative slope of trigger signal</span>
<span class="sd">        Input:</span>
<span class="sd">            slope: &#39;POS&#39;, &#39;NEG&#39; or &#39;EIT&#39;</span>
<span class="sd">            channel</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">slope</span><span class="o">=</span><span class="n">slope</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">slope</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;POS&quot;</span><span class="p">,</span> <span class="s2">&quot;NEG&quot;</span><span class="p">,</span> <span class="s2">&quot;EIT&quot;</span><span class="p">]:</span>
            <span class="n">channel</span><span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%i</span><span class="s2">;:TRIG:SLOP</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">),</span><span class="n">slope</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_trigger_slope">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_trigger_slope">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_trigger_slope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        with which slope does the trigger start?</span>
<span class="sd">        Input:</span>
<span class="sd">            channel</span>
<span class="sd">        Output:</span>
<span class="sd">            slope</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:INST</span><span class="si">%i</span><span class="s2">;:TRIG:SLOP?&quot;</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">channel</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">channel</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_clock">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_clock">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_clock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the clockfrequency, which is the rate at which the datapoints are</span>
<span class="sd">        sent to the designated output</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            clock (int) : frequency in Hz</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:FREQ:RAST?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clock</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_clock">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_clock">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_clock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clock</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the rate at which the datapoints are sent to the designated output channel</span>
<span class="sd">        Input:</span>
<span class="sd">            clock (int) : frequency in Hz (75e6 to 2.3e9)</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">clock</span> <span class="o">&gt;</span> <span class="mf">1.25e9</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_awg_version</span> <span class="o">==</span> <span class="s2">&quot;WX1284C&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_clock</span><span class="o">=</span><span class="mf">1.25e9</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This model of AWG has a maximum clock of 1.25GS/s. Setting to default 1.25 GS/s.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clock</span> <span class="o">=</span> <span class="n">clock</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:FREQ:RAST</span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clock</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_amplitude">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_amplitude">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Reads the amplitude of the designated channel from the instrument</span>
<span class="sd">        Input:</span>
<span class="sd">            channel (int) : 1, 2, 3 or 4: the number of the designated channel</span>
<span class="sd">        Output:</span>
<span class="sd">            amplitude (float) : the amplitude of the signal in Volts</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get amplitude of channel </span><span class="si">%s</span><span class="s1"> from instrument&#39;</span>
            <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:VOLT ?&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_amplitude">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_amplitude">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amp</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the amplitude of the designated channel of the instrument</span>
<span class="sd">        Input:</span>
<span class="sd">            amp (float)   : amplitude in Volts (0.050 V to 2.000 V)</span>
<span class="sd">            channel (int) : 1, 2, 3 or 4: the number of the designated channel</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set amplitude of channel </span><span class="si">%s</span><span class="s1"> to </span><span class="si">%.6f</span><span class="s1">&#39;</span>
            <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">amp</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">amp</span> <span class="o">&lt;</span> <span class="mf">50e-3</span><span class="p">:</span>
            <span class="n">amp</span> <span class="o">=</span> <span class="mf">50e-3</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;amplitude was set to 0.05 V, which is smallest possible voltage&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">amp</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">amp</span> <span class="o">=</span> <span class="mf">2.</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;amplitude was set to 2 V, which is highest possible voltage&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:VOLT</span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">amp</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_offset">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_offset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Reads the offset of the designated channel of the instrument</span>
<span class="sd">        Input:</span>
<span class="sd">            channel (int) : 1, 2, 3 or 4: the number of the designated channel</span>
<span class="sd">        Output:</span>
<span class="sd">            offset (float) : offset of designated channel in Volts</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get offset of channel </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:VOLT:OFFS ?&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_offset">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_offset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the offset of the designated channel of the instrument</span>
<span class="sd">        Input:</span>
<span class="sd">            offset (float) : offset in Volts (-1.000 V to 1.000 V)</span>
<span class="sd">            channel (int)  : 1, 2, 3 or 4: the number of the designated channel</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="k">if</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">1.000</span><span class="p">:</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.000</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Offset was set to -1.000 V, which is smallest possible voltage&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">offset</span> <span class="o">&gt;</span> <span class="mf">1.000</span><span class="p">:</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="mf">1.000</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Offset was set to 1.000 V, which is highest possible voltage&#39;</span><span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set offset of channel </span><span class="si">%s</span><span class="s1"> to </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">offset</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:VOLT:OFFS</span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">offset</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_marker_high">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_marker_high">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_marker_high</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the high level for marker1 on the designated channel.</span>
<span class="sd">        Note that Channels 1&amp;2 and 3&amp;4 share the same two markers.</span>
<span class="sd">        Input:</span>
<span class="sd">            channel (int) : 1, 2, 3 or 4: the number of the designated channel</span>
<span class="sd">        Output:</span>
<span class="sd">            high (float) : high level in Volts</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get upper bound of marker </span><span class="si">%i</span><span class="s1"> of channel </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(((</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">channel</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:MARK:SEL</span><span class="si">%i</span><span class="s1">;:MARK:VOLT:HIGH ?&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,((</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">))))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_marker_high">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_marker_high">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_marker_high</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the high level for marker1 on the designated channel.</span>
<span class="sd">        Note that Channels 1&amp;2 and 3&amp;4 share the same two markers.</span>

<span class="sd">        Input:</span>
<span class="sd">            high (float)   : high level in Volts</span>
<span class="sd">            channel (int)  : 1, 2, 3 or 4: the number of the designated channel</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">         &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set upper bound of marker</span><span class="si">%i</span><span class="s1"> of channel </span><span class="si">%s</span><span class="s1"> to </span><span class="si">%.3f</span><span class="s1">&#39;</span><span class="o">%</span> <span class="p">(((</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">channel</span><span class="p">,</span> <span class="n">high</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:MARK:SEL</span><span class="si">%i</span><span class="s1">;:MARK:VOLT:HIGH</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,((</span><span class="nb">int</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">high</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">()</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_status">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_status">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the status of the designated channel.</span>
<span class="sd">        Input:</span>
<span class="sd">            channel (int) : 1, 2, 3 or 4: the number of the designated channel</span>
<span class="sd">        Output:</span>
<span class="sd">            status (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get status of channel </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="n">outp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:OUTP ?&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">outp</span><span class="o">==</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">outp</span> <span class="o">==</span> <span class="s1">&#39;OFF&#39;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">outp</span><span class="o">==</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">outp</span> <span class="o">==</span> <span class="s1">&#39;ON&#39;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Read invalid status from instrument </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">outp</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;an error occurred while reading status from instrument&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ch</span><span class="si">%i</span><span class="s2">_output&quot;</span><span class="o">%</span><span class="n">channel</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_status">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_status">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the status of designated channel.</span>
<span class="sd">        Input:</span>
<span class="sd">            status (bool) : True or False</span>
<span class="sd">            channel (int)   : 1, 2, 3 or 4: the number of the designated channel</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set status of channel </span><span class="si">%s</span><span class="s1"> to </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">status</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:OUTP ON&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:OUTP OFF&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ch</span><span class="si">%i</span><span class="s2">_output&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">channel</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_reference_source">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_reference_source">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_reference_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;EXT&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the clock reference source.</span>
<span class="sd">        Input:</span>
<span class="sd">            source (string) : &#39;INT&#39; or &#39;EXT&#39;</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">source</span> <span class="o">==</span> <span class="s1">&#39;EXT&#39;</span> <span class="ow">or</span> <span class="n">source</span> <span class="o">==</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set clock reference source to </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="n">source</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:ROSC:SOUR </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="n">source</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Clock source needs to be one of INT or EXT. No changes made.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_reference_source">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_reference_source">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_reference_source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the clock reference source.</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            (string) : &#39;INT&#39; or &#39;EXT&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get clock reference source.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:ROSC:SOUR ?&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_reference_source_freq">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_reference_source_freq">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_reference_source_freq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">freq</span><span class="o">=</span><span class="mf">10e6</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the clock reference frequency.</span>
<span class="sd">        Input:</span>
<span class="sd">            freq (float) : 10e6, 20e6, 50e6, 100e6</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">freq</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">10e6</span><span class="p">,</span><span class="mf">20e6</span><span class="p">,</span><span class="mf">50e6</span><span class="p">,</span><span class="mf">100e6</span><span class="p">]:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set clock reference frequency to </span><span class="si">%.2g</span><span class="s1">&#39;</span> <span class="o">%</span><span class="n">freq</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:ROSC:FREQ </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="nb">str</span><span class="p">(</span><span class="n">freq</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Clock source needs to be one of [10e6,20e6,50e6,100e6]. No changes made.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_reference_source_freq">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_reference_source_freq">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_reference_source_freq</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Gets the clock reference frequency.</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            (string) : 10e6, 20e6, 50e6, 100e6</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Get clock reference frequency.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:ROSC:FREQ ?&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">*</span><span class="mf">1.0e6</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_set_common_clock">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_set_common_clock">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_set_common_clock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Use a common trigger clock for both channel pairs.</span>
<span class="sd">        Input:</span>
<span class="sd">            status (bool)</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set common clock.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST:COUPLE:STAT ON&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Set clocks to be separate.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST:COUPLE:STAT OFF&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.do_get_common_clock">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.do_get_common_clock">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_get_common_clock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Check whether a common clock for both channel pairs is used.</span>
<span class="sd">        Input:</span>
<span class="sd">            None</span>
<span class="sd">        Output:</span>
<span class="sd">            (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Check common clock.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;:INST:COUPLE:STAT ?&#39;</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;ON&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.send_waveform">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.send_waveform">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_waveform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">seg</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wfm_send</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">seg</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.wfm_send">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.wfm_send">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">wfm_send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">seg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sends a complete waveform. All parameters need to be specified.</span>
<span class="sd">        Takes a waveform as generated by generate_waveform from qkit and first converts it to data usable by the AWG</span>
<span class="sd">        then sends it to the memory of the specified channel into the specified segment.</span>
<span class="sd">        Minimum waveform size is 192 points. If a waveform is shorter, it will be appended automatically.</span>

<span class="sd">        See also: resend_waveform()</span>
<span class="sd">        Input:</span>
<span class="sd">            w (float[numpoints]) : waveform (amplitude range 0 &lt;-max amp.&gt; to 1 &lt;max amp.&gt;)</span>
<span class="sd">            m1 (int[numpoints])  : marker1 (either 1 or 0, i.e. marker on or off)</span>
<span class="sd">            m2 (int[numpoints])  : marker2 (either 1 or 0, i.e. marker on or off)</span>
<span class="sd">            use m1=None or m2=None to fill with zeros</span>
<span class="sd">            channel (int)        : channel 1, 2, 3, or 4 that waveform is sent to</span>
<span class="sd">            seg (int)            : # of data segment the waveform is sent to (1 to 16000)</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">channel</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;There are only channels 1 and 2.&quot;</span><span class="p">)</span>

        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span><span class="o">%</span><span class="mi">16</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span> <span class="c1">#wfm length has to be divisible by 16</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">192</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">192</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)))</span>
            <span class="n">m1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">192</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">m1</span><span class="p">)))</span>
            <span class="n">m2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">192</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">m2</span><span class="p">)))</span>

        <span class="k">if</span><span class="p">(</span><span class="n">m1</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span> <span class="n">m1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m2</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">m1</span><span class="p">))</span> <span class="ow">and</span> <span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">m2</span><span class="p">))))):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;error, the length of your waveform and markes does not match&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:TRAC:DEF</span><span class="si">%i</span><span class="s1">,</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">seg</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)))</span>

        <span class="c1">#Set specified channel and number of memory segment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:TRAC:SEL</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">seg</span><span class="p">))</span>

        <span class="c1">#set set single trace transfer mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:TRAC:MODE SING&#39;</span><span class="p">)</span>

        <span class="n">ws</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)):</span>
            <span class="n">ws</span> <span class="o">=</span> <span class="n">ws</span> <span class="o">+</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&lt;H&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="mi">8191</span><span class="o">*</span><span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">8192</span><span class="o">+</span><span class="n">m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="mi">14</span><span class="o">+</span><span class="n">m2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="mi">15</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">write_raw</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;:TRAC#</span><span class="si">%i%i%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="p">),</span> <span class="n">ws</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.wfm_send2">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.wfm_send2">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">wfm_send2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">m1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">m2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">seg</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sends two complete waveforms for channel pairs 1&amp;2 or 3&amp;4. All parameters need to be specified.</span>
<span class="sd">        Takes a waveform as generated by generate_waveform from qkit and first converts it to data usable by the AWG</span>
<span class="sd">        then sends it to the memory of the specified channel into the specified segment.</span>
<span class="sd">        Minimum waveform size is 192 points. If the two waveforms are shorter, they will be appended automatically.</span>

<span class="sd">        See also: resend_waveform()</span>
<span class="sd">        Input:</span>
<span class="sd">            w (float[numpoints]) : waveform (amplitude range 0 &lt;-max amp.&gt; to 1 &lt;max amp.&gt;)</span>
<span class="sd">            m1 (int[numpoints])  : marker1 (either 1 or 0, i.e. marker on or off)</span>
<span class="sd">            m2 (int[numpoints])  : marker2 (either 1 or 0, i.e. marker on or off)</span>
<span class="sd">            channel (int)        : channels are paired (1&amp;2, 3&amp;4) selecting either of one pair is fine</span>
<span class="sd">            seg (int)            : # of data segment the waveform is sent to (1 to 16000)</span>
<span class="sd">        Output:</span>
<span class="sd">            None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w2</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Waveform length is not equal.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w1</span><span class="p">)</span><span class="o">%</span><span class="mi">16</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Wfm length has to be divisible by 16&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">192</span><span class="p">:</span>
            <span class="n">w1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w1</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">192</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">w1</span><span class="p">)))</span>
            <span class="n">w2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w2</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">192</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">w2</span><span class="p">)))</span>
            <span class="n">m1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">192</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">m1</span><span class="p">)))</span>
            <span class="n">m2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">192</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">m2</span><span class="p">)))</span>

        <span class="k">if</span> <span class="n">m1</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">m1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">w1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">w1</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">w1</span><span class="p">)</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">m1</span><span class="p">))</span> <span class="ow">and</span> <span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">m2</span><span class="p">))))):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;error, the length of your waveform and markes does not match&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:TRAC:DEF</span><span class="si">%i</span><span class="s1">,</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">seg</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">w1</span><span class="p">)))</span>

        <span class="c1">#Set specified channel and number of memory segment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">;:TRAC:SEL</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">seg</span><span class="p">))</span>

        <span class="c1">#set set combined trace transfer mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:TRAC:MODE COMB&#39;</span><span class="p">)</span>

        <span class="n">wfm</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">8191</span><span class="o">*</span><span class="n">w2</span><span class="o">+</span><span class="mi">8192</span><span class="o">+</span><span class="n">m1</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="mi">14</span><span class="o">+</span><span class="n">m2</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="mi">15</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;&lt;H&#39;</span><span class="p">)),(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">16</span><span class="p">)),</span><span class="n">numpy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">8191</span><span class="o">*</span><span class="n">w1</span><span class="o">+</span><span class="mi">8192</span><span class="o">+</span><span class="n">m1</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="mi">14</span><span class="o">+</span><span class="n">m2</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="mi">15</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;&lt;H&#39;</span><span class="p">)),(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">16</span><span class="p">)),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">ws</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="nb">memoryview</span><span class="p">(</span><span class="n">wfm</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">write_raw</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;:TRAC#</span><span class="si">%i%i%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="p">),</span> <span class="n">ws</span><span class="p">))</span></div>



<div class="viewcode-block" id="Tabor_WX1284C.define_sequence">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.define_sequence">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">define_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span> <span class="n">segments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">loops</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">jump_flags</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        specifies the sequence table for sequenced mode.</span>
<span class="sd">        channel: segments table can be created for each pair of channels separately</span>
<span class="sd">        segments (array of ints or int): which segments in the awg do you want to output? (1-32000) If a simple int is specified, range(1,i+1) will be used</span>
<span class="sd">        loops (array of ints): How often should each segment be repeated? (1-16M)</span>
<span class="sd">        jump_flags (array of 0,1): if set to 1, the sequencer will wait at this sequence element until an event happens.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">channel</span> <span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">_choff</span>
        <span class="k">if</span> <span class="n">segments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Amount of segments not specified, try to get it from AWG&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">32000</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:TRAC:DEF</span><span class="si">%i</span><span class="s2">?&quot;</span><span class="o">%</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">segments</span> <span class="o">=</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">segments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Could not find number of segments...&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span><span class="o">==</span><span class="nb">int</span><span class="p">:</span>
            <span class="c1">#the segement table needs at least 3 entries. So if it would be shorter, we just take it multiple times.</span>
            <span class="k">if</span> <span class="n">segments</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">segments</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">segments</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">:</span> <span class="n">segments</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">segments</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">segments</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loops</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">loops</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">uint</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">jump_flags</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">jump_flags</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ushort</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">loops</span><span class="p">)</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">jump_flags</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Length of segments (</span><span class="si">%i</span><span class="s2">) does not match length of loops (</span><span class="si">%i</span><span class="s2">) or length of jump_flags(</span><span class="si">%i</span><span class="s2">)&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">loops</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">jump_flags</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Sorry, you need at least 3 segments. Your command has </span><span class="si">%i</span><span class="s2"> segments&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)))</span>

        <span class="c1">#Set specified channel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:INST</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">channel</span><span class="p">))</span>
        <span class="n">ws</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)):</span>
            <span class="n">ws</span> <span class="o">=</span> <span class="n">ws</span> <span class="o">+</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&lt;LHH&#39;</span><span class="p">,</span> <span class="n">loops</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">segments</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">jump_flags</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_raw</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;:SEQ#</span><span class="si">%i%i%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="p">),</span> <span class="n">ws</span><span class="p">))</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.set_seq_length">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.set_seq_length">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_seq_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">length</span><span class="p">,</span><span class="n">chpair</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">define_sequence</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">chpair</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numchannels</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="n">chpair</span><span class="p">),</span><span class="n">length</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tabor_WX1284C.close">
<a class="viewcode-back" href="../../../qkit.drivers.html#qkit.drivers.Tabor_WX1284C.Tabor_WX1284C.close">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visainstrument</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Wridhdhisom / Quantum Circuits Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>